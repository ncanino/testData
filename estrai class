import java.io.File;
import java.io.IOException;
import java.nio.file.Files;

public class VerifyJavaVersion {

    public static void main(String[] args) throws IOException {
        // Directory contenente i file .class
        String directoryPath = "path/to/directory";
        
        // Ottiene un array di file .class nella directory
        File directory = new File(directoryPath);
        File[] classFiles = directory.listFiles((dir, name) -> name.endsWith(".class"));
        
        // Verifica la versione principale del bytecode di ogni file .class
        for (File classFile : classFiles) {
            byte[] bytes = Files.readAllBytes(classFile.toPath());
            int majorVersion = ((bytes[6] & 0xFF) << 8) | (bytes[7] & 0xFF);
            System.out.println("Il file " + classFile.getName() + " ha la versione principale del bytecode " + majorVersion);
        }
    }
}
